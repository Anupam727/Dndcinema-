<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>DNDCINEMA 2025 - Free HD Movies</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Anton&family=Roboto:wght@400;700&display=swap"/>
  <style>
    :root {
      --menu-width: 335px;
      --brand-yellow: #ffcc00;
      --brand-yellow-dark: #ffaa00;
      --brand-muted: #fffbe0;
      --brand-dark: #232323;
      --shadow: 0 8px 32px #0002;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: "Roboto", Arial, sans-serif;
      background: linear-gradient(120deg, #111 60%, #222 100%);
      color: #fff;
      transition: background .35s, color .35s;
      overflow-x: hidden;
    }
    header {
      position: relative;
      background: var(--brand-dark);
      color: var(--brand-yellow);
      font-family: 'Anton', sans-serif;
      font-size: 2.3em;
      text-align: center;
      font-weight: 700;
      padding: 18px 0 16px 0;
      box-shadow: 0 8px 32px #0002;
      letter-spacing: 1.5px;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 50;
    }
    .menu-button {
      position: absolute;
      left: 20px; top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 7px;
      width: 38px;
      height: 32px;
      cursor: pointer;
      z-index: 999;
      background: none;
      border: none;
      outline: none;
      transition: opacity .24s;
    }
    .menu-button span {
      display: block;
      height: 5px;
      width: 100%;
      background: var(--brand-yellow);
      border-radius: 2.5px;
      transition: background .25s;
    }
    .menu-button.hide { opacity: 0; pointer-events:none; }
    #menu-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(30,30,30,0.64);
      opacity: 0;
      pointer-events: none;
      z-index: 1000;
      transition: opacity .25s;
    }
    #menu-backdrop.open {
      opacity: 1; pointer-events: auto;
    }
    #sideMenu {
      position: fixed;
      top: 0; left: calc(-1 * var(--menu-width));
      width: var(--menu-width);
      max-width: 100vw;
      height: 100vh;
      background: var(--brand-muted);
      box-shadow: 10px 0 30px #0007;
      z-index: 1050;
      transition: left 0.35s cubic-bezier(.22,1,.36,1);
      padding: 0 0 24px 0;
      display: flex;
      flex-direction: column;
      gap: 0;
      align-items: stretch;
    }
    #sideMenu.open {
      left: 0;
    }
    #sideMenu .menu-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 22px 22px 14px 22px;
    }
    #sideMenu .menu-title {
      font-family: 'Anton',sans-serif;
      font-size: 2em;
      color: var(--brand-yellow);
      display: flex;
      align-items: center;
      gap: 10px;
      letter-spacing: 2px;
    }
    #sideMenu .inlines {
      display: flex;
      align-items: center;
      gap: 2px;
      margin-right: 7px;
      font-size: 1.2em;
    }
    #sideMenu .close-btn {
      font-size: 2em;
      background: none;
      border: 0;
      color: var(--brand-yellow);
      line-height: 1;
      cursor: pointer;
      margin-left: 8px;
      font-family: sans-serif;
      transition: color 0.15s;
    }
    #sideMenu .close-btn:hover { color: #ffaa00; }
    #sideMenu .menu-content {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      gap: 32px;
      justify-content: flex-start;
      align-items: stretch;
      padding: 0 24px;
    }
    .theme-row {
      display: flex; align-items: center; gap: 22px; margin-top: 0; margin-bottom: 0; font-family:'Anton',sans-serif;
    }
    .theme-label {
      font-size: 1.2em;
      color: #232323;
      font-weight: bold;
      letter-spacing: 1px;
    }
    .toggle-switch {
      position: relative;
      width: 52px;
      height: 28px;
      display: inline-block;
    }
    .toggle-switch input[type="checkbox"] {
      opacity:0; width:0; height:0;
    }
    .toggle-slider {
      position: absolute; top:0; left: 0; right: 0; bottom: 0;
      background: #dedede;
      border-radius: 30px; transition: background .3s;
      cursor:pointer;
    }
    .toggle-switch input[type="checkbox"]:checked+.toggle-slider {
      background: var(--brand-yellow);
    }
    .toggle-slider:before {
      content: "";
      position: absolute;
      left: 3px; top: 3px;
      height: 22px;
      width: 22px;
      background: #232323;
      border-radius: 50%;
      transition: .24s;
    }
    .toggle-switch input[type="checkbox"]:checked+.toggle-slider:before {
      background: #fffbe0;
      transform: translateX(24px);
    }
    .telegram-row {
      margin-top: 48px;
      text-align: center;
    }
    .telegram-btn {
      display: inline-flex;
      align-items: center;
      gap: 11px;
      font-family: 'Anton',sans-serif;
      font-size: 1.16em;
      color: #fff;
      background: #229ed9;
      border: none;
      border-radius: 33px;
      padding: 13px 32px 13px 20px;
      font-weight: bold;
      box-shadow: 0 2px 14px #219cd94d;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.21s, transform .19s;
    }
    .telegram-btn:hover { background: #179dd6;  transform: scale(1.06);}
    .telegram-icon {
      width: 28px; height: 28px; display: inline-block;
      vertical-align: middle;
    }
    @media(max-width:480px) {
      #sideMenu { width: 98vw; left: -98vw; padding: 0 0 10px 0;}
      #sideMenu.open { left: 0; }
      #sideMenu .menu-header {padding:15px 10px 10px 16px;}
      #sideMenu .menu-content {padding: 0 7vw;}
    }
    body.light-theme {
      background: linear-gradient(120deg, #fffbe0 60%, #ffec99 100%)!important;
      color: #232323;
    }
    body.light-theme header {
      background: var(--brand-yellow);
      color: #232323;
      box-shadow: 0 8px 32px #bcb70433;
    }
    body.light-theme .menu-button span { background: #232323; }
    /* Improved search box style */
    .search-box {
      display: flex; 
      justify-content: center; align-items: center; 
      gap: 0; margin: 18px auto 0 auto; width: 96%; max-width: 510px;
      position: relative;
      box-shadow: 0 1.5px 16px #ffcc0030;
      border-radius: 11px;
      background: linear-gradient(90deg, #ffec99cc 0%, #ffcc00 100%);
      padding: 5px;
    }
    .search-box input {
      width: 100%; 
      background: transparent;
      border: none;
      outline: none;
      font-size: 1.16em;
      font-family: "Roboto";
      color: #111;
      padding: 15px 13px;
      border-radius: 7px 0 0 7px;
      font-weight: bold;
      background: #fffbe050;
      transition: background .14s, color .16s;
      box-shadow: none;
      letter-spacing: 1px;
    }
    .search-box button {
      border-radius: 0px 7px 7px 0px;
      border: none; cursor: pointer;
      padding: 15px 22px 14px 22px;
      background: linear-gradient(90deg,#ffcc00,#ffaa00);
      color: #232323;
      font-weight: bold;
      font-size: 1.17em;
      transition: background 0.25s;
      box-shadow: 0 2px 8px #ffcc0040;
      outline: none;
      letter-spacing: 1px;
    }
    .search-box button:hover { background: linear-gradient(90deg,#ffaa00,#ffcc00);}
    /* Suggestions must show below search box */
    .suggestions {
      position: absolute;
      left: 0; 
      width: 100%;
      background: #fffde8;
      border-radius: 0 0 9px 9px;
      max-height: 248px;
      overflow-y: auto;
      z-index: 13;
      text-align:left;
      display:none;
      margin-top: 3px;
      box-shadow: 0 6px 24px #ffcc0075;
      color: #111;
    }
    .suggestions div { 
      padding:13px 12px; 
      cursor:pointer; 
      display: flex; 
      align-items: center; 
      gap:13px;
      font-size: 1em;
      font-family: 'Roboto',sans-serif;
      border-bottom: 1px solid #ffe97d35;
    }
    .suggestions img { width:40px; height:56px; object-fit:cover; border-radius:5px;}
    .suggestions div:last-child { border-bottom: none;}
    .suggestions div:hover { background: #ffeca1;}
    /* Keep rest below as is */
    /* ... [rest of .card-container, movie-card, pills etc. styling as previous code] ... */
    #genreButtons, #industryButtons { display:flex; flex-wrap:wrap; justify-content:center; margin-top:18px; gap:14px;}
    #genreButtons button, #industryButtons button {
      padding:12px 28px;
      border:none;
      border-radius:50px;
      background:linear-gradient(90deg,#ffcc00,#ffaa00);
      color:#111; font-weight:bold; cursor:pointer;
      font-size:1.02em;
      box-shadow:0 3px 9px rgba(0,0,0,0.15);
      transition:transform 0.22s,box-shadow 0.22s;
    }
    #genreButtons button.active, #industryButtons button.active {
      background:linear-gradient(90deg,#ffffff,#ffcc00);
      color:#232323; border: 1.5px solid #ffaa00;
      transform:scale(1.08);
      box-shadow:0 8px 28px rgba(255,204,0,0.3);
    }
    #genreButtons button:hover, #industryButtons button:hover { transform: scale(1.09); box-shadow: 0 10px 24px #ffcc00b3;}
    .card-container {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
      gap: 24px;
      margin: 32px auto 10px auto;
      width: 98%;
      max-width: 1200px;
      padding-bottom: 50px;
    }
    .movie-card {
      background: #222;
      border-radius: 18px;
      padding: 13px;
      box-shadow: 0 6px 18px #0007;
      transition: transform 0.2s, box-shadow 0.2s;
      display: flex; flex-direction: column; align-items: center;
      min-height: 340px;
      position: relative;
    }
    .movie-card:hover {
      transform: scale(1.035);
      box-shadow: 0 16px 40px #ffcc0022;
    }
    .movie-card img {
      width:100%; max-width:210px; min-height:250px; object-fit:cover;
      border-radius: 10px; margin-bottom: 10px;
      box-shadow:0 1px 7px #4446;
    }
    .movie-card h3 {
      margin: 7px 0; font-size: 1.25em;
      color:#ffcc00; text-align:center;
      font-family:'Anton',sans-serif;
      letter-spacing:1px;
    }
    .movie-meta {
      display:flex;
      justify-content:center;
      gap:18px;
      font-size:15px;
      color:#ffcc00;
      margin-bottom: 4px;
    }
    .movie-meta span { background:#232323; padding:2px 11px; border-radius:7px;}
    .movie-card .resButtons {
      margin-top:10px;
      display: flex; gap:9px; flex-wrap: wrap; justify-content:center;
    }
    .movie-card .download-btn {
      display: inline-block;
      padding: 10px 20px;
      font-size:1.01em;
      font-weight: bold;
      border-radius: 9px;
      border: none;
      outline: none;
      background: linear-gradient(90deg,#ffaa00,#ffcc00);
      color: #232323;
      margin: 2px;
      text-decoration: none;
      box-shadow: 0 2px 8px #ffcc0020;
      transition: background 0.18s, transform 0.18s;
    }
    .movie-card .download-btn:hover {
      background: linear-gradient(90deg,#ffcc00,#ffaa00);
      transform: scale(1.11);
      color: #000;
      box-shadow: 0 4px 18px #ffaa00b3;
    }
    .highlight { background:yellow; color:#111; border-radius:3px; padding:0px 2px}
    .no-result { margin-top:22px; font-size:1.18em; color:#ff4444; text-align: center;}
    #pagination { margin-top:22px; display:flex; justify-content:center; gap:13px;}
    #pagination button {
      padding:10px 22px;
      border-radius:7px;
      border:none;
      background:linear-gradient(90deg,#ffaa00,#ffcc00);
      color:#111; font-weight:bold; cursor:pointer;
      font-size:1em;
      transition:transform 0.23s;
    }
    #pagination button:hover { background:linear-gradient(90deg,#ffcc00,#ffaa00); transform:scale(1.11);}
    #latestSliderWrapper {display:flex; justify-content:center; align-items: center; overflow:hidden; margin-bottom:18px;}
    #latestSlider {display:flex; gap:10px; overflow-x:scroll; scroll-behavior:smooth; padding:14px 0;}
    .slider-poster {flex:0 0 auto; width:112px; max-height:150px; object-fit:cover; border-radius:12px; cursor:pointer; transition:transform 0.22s;}
    .slider-poster:hover { transform:scale(1.15); box-shadow:0 4px 18px #ffcc00a6;}
    @media (max-width:900px){ .card-container { grid-template-columns: repeat(auto-fit,minmax(180px,1fr));} }
    @media (max-width:600px){ 
      .card-container { grid-template-columns:repeat(1,1fr); }
      .movie-card img{min-height:180px;}
      .search-box {width:100%;}
    }
  </style>
</head>
<body>
  <header>
    <button class="menu-button" id="menuButton" aria-label="Open menu">
      <span></span><span></span><span></span>
    </button>
    DNDCINEMA
  </header>
  <div id="menu-backdrop"></div>
  <aside id="sideMenu" aria-hidden="true" role="dialog">
    <div class="menu-header">
      <span class="menu-title"><span class="inlines"><span style="background:#232323;height:6px;width:23px;display:inline-block;border-radius:3px;margin-right:2px;"></span><span style="background:#232323;height:6px;width:15px;display:inline-block;border-radius:3px"></span></span>MENU</span>
      <button class="close-btn" id="closeMenuBtn" aria-label="Close Menu">&times;</button>
    </div>
    <div class="menu-content">
      <div class="theme-row">
        <span class="theme-label">Dark Mode</span>
        <label class="toggle-switch">
          <input type="checkbox" id="themeToggle" aria-checked="false" role="switch">
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="telegram-row">
        <a class="telegram-btn" href="https://t.me/DNDCINEMA" target="_blank" rel="noopener">
          <svg class="telegram-icon" viewBox="0 0 40 40"><circle fill="#229ed9" cx="20" cy="20" r="20"/><path fill="#fff" d="M31.4,11.8c-0.4-0.4-1.1-0.4-1.5-0.2c0,0-0.1,0-0.1,0l-18,7c0,0,0,0,0,0 c-0.7,0.3-1.1,1-0.8,1.8c0.2,0.6,0.5,1.4,0.7,2.2c0.3,0.9,0.6,1.7,1.1,2.2c0.7,0.8,1.8,1,2.8,0.4c0.7-0.5,3.2-1.9,4.2-2.5 c1.1-0.7,2.3-1.9,3-2.7c0.1-0.1,0.1-0.3,0.2-0.3c0,0,0.1,0,0.1,0c0.3-0.2,0.9-0.3,1.1,0.1c0.2,0.4-0.1,1.1-0.1,1.1s-2.9,3.3-4.9,5.1 c-0.8,0.7-1.1,1.7-0.7,2.5c0.5,1,1.7,1.4,2.8,1.1c2.5-0.7,7.5-2.6,10.6-5.1c0.4-0.3,0.6-0.9,0.6-1.7c0-0.9-0.4-1.4-0.7-1.7l-3.7-3.5 C30.5,13,31.1,12.2,31.4,11.8z"/></svg>
          Join Telegram
        </a>
      </div>
    </div>
  </aside>
  <h1></h1>
  <div id="latestSliderWrapper"><div id="latestSlider"></div></div>
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search movie..." oninput="debouncedSearch()" autocomplete="off" />
    <button onclick="searchButtonClicked()">Search</button>
    <div id="suggestions" class="suggestions"></div>
  </div>
  <div id="genreButtons">
    <button onclick="filterCategory('Latest','year')">Latest</button>
    <button onclick="filterCategory('Action','type')">Action</button>
    <button onclick="filterCategory('Horror','type')">Horror</button>
    <button onclick="filterCategory('Comedy','type')">Comedy</button>
    <button onclick="filterCategory('Romance','type')">Romance</button>
  </div>
  <div id="industryButtons">
    <button onclick="filterIndustry('Bollywood')">Bollywood</button>
    <button onclick="filterIndustry('Hollywood')">Hollywood</button>
    <button onclick="filterIndustry('South')">South</button>
  </div>
  <div id="movieGrid" class="card-container"></div>
  <p id="noResult" class="no-result" style="display:none;">‚ùå No movie found</p>
  <div id="pagination"></div>
  <script>
    // --- SIDEMENU + THEME ---
    const menuBtn = document.getElementById('menuButton');
    const sideMenu = document.getElementById('sideMenu');
    const closeMenuBtn = document.getElementById('closeMenuBtn');
    const backdrop = document.getElementById('menu-backdrop');
    const themeToggle = document.getElementById('themeToggle');
    function openMenu() {
      sideMenu.classList.add('open');
      backdrop.classList.add('open');
      sideMenu.setAttribute('aria-hidden', 'false');
      menuBtn.classList.add('hide');
      document.body.style.overflow = 'hidden';
      setTimeout(() => { closeMenuBtn.focus(); }, 200);
    }
    function closeMenu() {
      sideMenu.classList.remove('open');
      backdrop.classList.remove('open');
      sideMenu.setAttribute('aria-hidden', 'true');
      menuBtn.classList.remove('hide');
      document.body.style.overflow = '';
      setTimeout(() => { menuBtn.focus(); }, 120);
    }
    menuBtn.addEventListener('click', openMenu);
    closeMenuBtn.addEventListener('click', closeMenu);
    backdrop.addEventListener('click', closeMenu);
    document.addEventListener('keydown', e => {
      if(e.key === 'Escape' && sideMenu.classList.contains('open')) closeMenu();
    });
    if(localStorage.getItem('dndcinema-theme') === 'light') {
      document.body.classList.add('light-theme');
      themeToggle.checked = true;
      themeToggle.setAttribute('aria-checked', 'true');
    }
    themeToggle.addEventListener('change', () => {
      if(themeToggle.checked){
        document.body.classList.add('light-theme');
        localStorage.setItem('dndcinema-theme', 'light');
        themeToggle.setAttribute('aria-checked', 'true');
      } else {
        document.body.classList.remove('light-theme');
        localStorage.setItem('dndcinema-theme', 'dark');
        themeToggle.setAttribute('aria-checked', 'false');
      }
    });
    // --- END SIDEMENU ---

    // --- MOVIE APP LOGIC RESTORED ---
    const sheetURL="https://docs.google.com/spreadsheets/d/1uBCQXepKiOsyM2HSZSERMzI4omJqRsYtiH-Cp8wx798/gviz/tq?tqx=out:csv";
    let movies=[], currentFilter={type:'',year:''}, currentIndustry='', debounceTimer, showGrid=false;
    let currentPage=1, moviesPerPage=6;
    const cacheKey="movieDataCache", cacheDuration=5*60*1000;
    function markActiveButton(buttons, value){
      Array.from(buttons).forEach(b=>{
        if(b.textContent.toLowerCase()===value.toLowerCase()) b.classList.add('active');
        else b.classList.remove('active');
      });
    }
    function loadMovies(){
      const cache = localStorage.getItem(cacheKey);
      if(cache){
        const parsed = JSON.parse(cache);
        if(Date.now() - parsed.timestamp < cacheDuration){
          movies = parsed.data; renderLatestSlider(); displayRandomGrid(); return;
        }
      }
      fetch(sheetURL).then(res=>res.text()).then(csvText=>{
        const rows=csvText.split(/\r?\n/); rows.shift();
        movies=rows.map(r=>{
          const cols=r.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g);
          if(!cols) return null;
          return {
            title: cols[0]?.replace(/"/g,'').trim(),
            image: cols[1]?.replace(/"/g,'').trim(),
            link480: cols[2]?.replace(/"/g,'').trim(),
            link720: cols[3]?.replace(/"/g,'').trim(),
            link1080: cols[4]?.replace(/"/g,'').trim(),
            type: cols[5]?.replace(/"/g,'').trim(),
            year: cols[6]?.replace(/"/g,'').trim(),
            industry: cols[7]?.replace(/"/g,'').trim(),
            date: cols[8]?.replace(/"/g,'').trim()
          }
        }).filter(Boolean);
        localStorage.setItem(cacheKey, JSON.stringify({data:movies, timestamp:Date.now()}));
        renderLatestSlider(); displayRandomGrid();
      }).catch(err=>console.error("Failed to fetch movies:",err));
    }
    function displayRandomGrid(){
      currentPage=1; showGrid=true;
      const shuffled = [...movies].sort(()=>0.5-Math.random());
      displayMovies(shuffled.slice(0,6));
    }
    let sliderIndex = 0, sliderInterval;
    function renderLatestSlider(){
      const sliderDiv=document.getElementById("latestSlider");
      sliderDiv.innerHTML="";
      if(!movies.length) return;
      const sortedMovies = [...movies].sort((a,b)=>{
        const dateA = new Date(a.date || "1970-01-01");
        const dateB = new Date(b.date || "1970-01-01");
        return dateB - dateA;
      });
      const latestMovies = sortedMovies.slice(0,6);
      latestMovies.forEach(m=>{
        const img=document.createElement("img");
        img.src=m.image; img.alt=m.title;
        img.className="slider-poster";
        img.title=m.title;
        img.onclick=()=>{
          document.getElementById("searchInput").value=m.title;
          currentFilter={type:'',year:''}; currentIndustry=''; showGrid=true; currentPage=1;
          displayMovies();
        };
        sliderDiv.appendChild(img);
      });
      clearInterval(sliderInterval);
      sliderIndex = 0;
      sliderInterval = setInterval(()=>{
        sliderIndex++;
        if(sliderIndex >= latestMovies.length) sliderIndex = 0;
        sliderDiv.scrollTo({left:sliderIndex*130, behavior:'smooth'});
      },2250);
    }
    function levenshteinDistance(a,b){
      const matrix=Array.from({length:a.length+1},()=>Array(b.length+1).fill(0));
      for(let i=0;i<=a.length;i++) matrix[i][0]=i;
      for(let j=0;j<=b.length;j++) matrix[0][j]=j;
      for(let i=1;i<=a.length;i++){
        for(let j=1;j<=b.length;j++){
          if(a[i-1]===b[j-1]) matrix[i][j]=matrix[i-1][j-1];
          else matrix[i][j]=1+Math.min(matrix[i-1][j],matrix[i][j-1],matrix[i-1][j-1]);
        }
      }
      return matrix[a.length][b.length];
    }
    function fuzzyMatch(movie, query){
      query=query.toLowerCase().trim();
      if(!query) return true;
      if(movie.title && movie.title.toLowerCase().includes(query)) return true;
      if(movie.type && movie.type.toLowerCase().includes(query)) return true;
      if(movie.industry && movie.industry.toLowerCase().includes(query)) return true;
      return levenshteinDistance(movie.title.toLowerCase(), query)<=1;
    }
    function highlightMatch(text, query){
      let words=query.split(" ").filter(Boolean);
      words.forEach(word=>{
        const regex=new RegExp(`(${word})`, "ig");
        text=text.replace(regex, `<span class="highlight">$1</span>`);
      });
      return text;
    }
    function showSuggestions(){
      const input=document.getElementById("searchInput").value.toLowerCase().trim();
      const suggBox=document.getElementById("suggestions");
      suggBox.innerHTML="";
      if(!input){ suggBox.style.display="none"; showGrid=false; currentPage=1; displayMovies(); return; }
      const matched=movies.filter(m=>fuzzyMatch(m,input)).slice(0,7);
      matched.forEach(m=>{
        const div=document.createElement("div");
        div.innerHTML=`<img src="${m.image}" alt="${m.title}"><span>${highlightMatch(m.title, input)}</span>`;
        div.onclick=()=>{
          document.getElementById("searchInput").value=m.title;
          showGrid=true; currentPage=1; displayMovies(); suggBox.style.display="none";
        };
        suggBox.appendChild(div);
      });
      suggBox.style.display=matched.length ? "block" : "none";
    }
    function debouncedSearch(){ clearTimeout(debounceTimer); debounceTimer=setTimeout(showSuggestions,260); }
    function searchButtonClicked(){ showGrid=true; currentPage=1; displayMovies(); }
    function filterCategory(value, filterType){
      document.getElementById("searchInput").value="";
      currentPage=1; currentIndustry=''; showGrid=true;
      let allBtns=document.querySelectorAll("#genreButtons button");
      markActiveButton(allBtns, value);
      if(filterType==='type'){ currentFilter.type=value; currentFilter.year=''; }
      else if(filterType==='year'){ currentFilter.year=value; currentFilter.type=''; }
      document.getElementById("suggestions").style.display="none";
      displayMovies();
    }
    function filterIndustry(value){
      document.getElementById("searchInput").value="";
      currentPage=1; currentFilter={type:'',year:''}; showGrid=true;
      let allBtns=document.querySelectorAll("#industryButtons button");
      markActiveButton(allBtns, value);
      currentIndustry=value;
      document.getElementById("suggestions").style.display="none";
      displayMovies();
    }
    function updatePagination(totalPages){
      const pagDiv=document.getElementById("pagination");
      pagDiv.innerHTML="";
      if(totalPages<=1) return;
      if(currentPage>1){
        const prevBtn=document.createElement("button");
        prevBtn.textContent="Previous";
        prevBtn.onclick=()=>{ currentPage--; displayMovies(); };
        pagDiv.appendChild(prevBtn);
      }
      if(currentPage<totalPages){
        const nextBtn=document.createElement("button");
        nextBtn.textContent="Next";
        nextBtn.onclick=()=>{ currentPage++; displayMovies(); };
        pagDiv.appendChild(nextBtn);
      }
    }
    function displayMovies(customList=null){
      const grid=document.getElementById("movieGrid");
      const noRes=document.getElementById("noResult");
      grid.innerHTML=""; noRes.style.display="none";
      if(!showGrid) return;
      let filtered = customList ? customList : [...movies];
      const query=document.getElementById("searchInput").value.toLowerCase().trim();
      if(query) filtered=filtered.filter(m=>fuzzyMatch(m,query));
      if(currentFilter.type) filtered=filtered.filter(m=>m.type && m.type.toLowerCase()===currentFilter.type.toLowerCase());
      if(currentFilter.year){
        if(currentFilter.year.toLowerCase()==='latest'){
          const maxYear=Math.max(...movies.map(m=>parseInt(m.year)||0));
          filtered=filtered.filter(m=>parseInt(m.year)===maxYear);
        } else filtered=filtered.filter(m=>parseInt(m.year)===parseInt(currentFilter.year));
      }
      if(currentIndustry) filtered=filtered.filter(m=>m.industry && m.industry.toLowerCase()===currentIndustry.toLowerCase());
      if(!filtered.length){ noRes.style.display="block"; document.getElementById("pagination").innerHTML=""; return; }
      const totalPages = Math.ceil(filtered.length/moviesPerPage);
      const start = (currentPage-1)*moviesPerPage;
      const end= start + moviesPerPage;
      const pageMovies = filtered.slice(start, end);
      pageMovies.forEach(m=>{
        const card=document.createElement("div");
        card.className="movie-card";
        card.innerHTML=`<img src="${m.image}" loading="lazy" alt="${m.title}">
                        <h3>${highlightMatch(m.title, query)}</h3>
                        <div class="movie-meta">
                          ${m.type? `<span>${m.type}</span>`: ''}
                          ${m.industry? `<span>${m.industry}</span>`: ''}
                          ${m.year? `<span>${m.year}</span>`: ''}
                        </div>
                        <div class="resButtons"></div>`;
        const resDiv=card.querySelector(".resButtons");
        if(m.link480){ const a=document.createElement("a"); a.href=m.link480; a.textContent="Download 480p"; a.className="download-btn"; a.target="_blank"; resDiv.appendChild(a);}
        if(m.link720){ const a=document.createElement("a"); a.href=m.link720; a.textContent="Download 720p"; a.className="download-btn"; a.target="_blank"; resDiv.appendChild(a);}
        if(m.link1080){ const a=document.createElement("a"); a.href=m.link1080; a.textContent="Download 1080p"; a.className="download-btn"; a.target="_blank"; resDiv.appendChild(a);}
        grid.appendChild(card);
      });
      updatePagination(totalPages);
    }
    window.addEventListener('DOMContentLoaded',loadMovies);
  </script>
  <body><script type='text/javascript' src='//playedsophomore.com/e9/4a/b1/e94ab1f7f9eb2ba08a423c62468c4fd7.js'></script></body>
</body>
</html>

<script type='text/javascript' src='//playedsophomore.com/47/1c/29/471c293e3b3ca5b77625758b4ec0d966.js'></script>